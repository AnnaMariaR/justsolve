<button (click)="goBack()">← Back to list</button>

@if (debt) {
  <h2>Debt {{ debt.id }}</h2>
  <p><strong>Debtor:</strong> {{ debt.debtor_name }}</p>
  <p><strong>Amount:</strong> {{ debt.amount | number:'1.2-2' }} EUR</p>
  <p><strong>Days overdue:</strong> {{ debt.days_overdue }}</p>
  <p><strong>Status:</strong> {{ debt.status }}</p>
  @if (debt.last_action) {
    <p>
      <strong>Last action:</strong> {{ debt.last_action }}
      @if (debt.last_action_at) {
        <span>
          ({{ debt.last_action_at | date:'short' }})
        </span>
      }
    </p>
  }

  <hr />

  <button (click)="loadSuggestion()" [disabled]="loadingSuggestion">
    {{ loadingSuggestion ? 'Loading suggestion…' : 'Get suggested action' }}
  </button>

  @if (suggestion) {
    <div class="suggestion-box">
      <p><strong>Suggested action:</strong> {{ suggestion.action }}</p>
      <p><em>{{ suggestion.reason }}</em></p>
    </div>
  }

  <div class="actions-box">
    <p><strong>Apply action:</strong></p>
    @for (action of availableActions; track action.value) {
      <button (click)="applyAction(action.value)" [disabled]="applyingAction !== null" class="action-button">
        {{ action.label }}
      </button>
    }
  </div>
} @else {
  <p>Loading debt…</p>
}
