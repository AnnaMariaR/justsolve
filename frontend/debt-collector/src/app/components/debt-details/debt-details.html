<button (click)="goBack()">← Back to list</button>

<ng-container *ngIf="debt; else loading">
  <h2>Debt #{{ debt.id }}</h2>
  <p><strong>Debtor:</strong> {{ debt.debtor_name }}</p>
  <p><strong>Amount:</strong> {{ debt.amount | number:'1.2-2' }} EUR</p>
  <p><strong>Days overdue:</strong> {{ debt.days_overdue }}</p>
  <p><strong>Status:</strong> {{ debt.status }}</p>
  <p *ngIf="debt.last_action">
    <strong>Last action:</strong> {{ debt.last_action }}
    <span *ngIf="debt.last_action_at">
      ({{ debt.last_action_at | date:'short' }})
    </span>
  </p>

  <hr />

  <button (click)="loadSuggestion()" [disabled]="loadingSuggestion">
    {{ loadingSuggestion ? 'Loading suggestion…' : 'Get suggested action' }}
  </button>

  <div *ngIf="suggestion" style="margin-top: 1rem;">
    <p><strong>Suggested action:</strong> {{ suggestion.action }}</p>
    <p><em>{{ suggestion.reason }}</em></p>

    <button (click)="applyAction(suggestion.action)" [disabled]="applying">
      {{ applying ? 'Applying…' : 'Apply suggested action' }}
    </button>
  </div>
</ng-container>

<ng-template #loading>
  <p>Loading debt…</p>
</ng-template>
